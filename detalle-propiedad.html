<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Propiedad - RentFagelu</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/detalle-propiedad.css">
      <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="index.html">Rentfagelu</a>
            </div>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="propiedades.html">Propiedades</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="contacto.html">Contacto</a></li>
                <li><a href="carrito.html" class="cart-link">üõí Carrito <span class="cart-badge">0</span></a></li>
            </ul>
            <div class="user-actions">
                <a href="login.html" id="login-link">Iniciar Sesi√≥n</a>
                <a href="registro.html" id="register-link">Registrarse</a>
                <div id="user-info" style="display: none;">
                    <span id="user-name"></span>
                    <button id="logout-btn">Cerrar Sesi√≥n</button>
                </div>
            </div>
        </nav>
    </header>

    <main class="property-detail-main">
        <div class="property-detail-container">
            <div class="property-detail-content">
                <!-- Secci√≥n de im√°genes -->
                <div class="property-images">
                    <div class="main-property-image" id="main-image">
                        <img src="" alt="Imagen principal de la propiedad" id="main-img">
                    </div>
                    <div class="property-thumbnails" id="thumbnails-container">
                        <div class="thumbnail active" onclick="changeMainImage(this, 0)">
                            <img src="" alt="Vista principal" class="thumbnail-img">
                        </div>
                        <div class="thumbnail" onclick="changeMainImage(this, 1)">
                            <img src="" alt="Interior 1" class="thumbnail-img">
                        </div>
                        <div class="thumbnail" onclick="changeMainImage(this, 2)">
                            <img src="" alt="Interior 2" class="thumbnail-img">
                        </div>
                    </div>
                </div>

                <!-- Informaci√≥n de la propiedad -->
                <div class="property-information">
                    <h1 id="property-title">Nombre de la Propiedad</h1>
                    <div class="property-location">
                        <span class="location-icon">üìç</span>
                        <span id="property-location">Ubicaci√≥n</span>
                    </div>
                    
                    <div class="property-price">
                        <span id="property-price">$950.000.000</span>
                    </div>

                    <div class="property-features">
                        <div class="feature-item">
                            <span class="feature-icon">üõèÔ∏è</span>
                            <span id="property-bedrooms">3 Habitaciones</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üöø</span>
                            <span id="property-bathrooms">2 Ba√±os</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìê</span>
                            <span id="property-area">120 m¬≤</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üöó</span>
                            <span id="property-parking">1 Estacionamiento</span>
                        </div>
                    </div>

                    <div class="property-description">
                        <h3>Descripci√≥n</h3>
                        <p id="property-description-text">
                            Hermosa propiedad con excelentes caracter√≠sticas y ubicaci√≥n privilegiada.
                        </p>
                    </div>

                    <div class="property-actions">
                        <div class="payment-options">
                            <label for="payment-type">Forma de pago:</label>
                            <select id="payment-type" class="payment-selector">
                                <option value="cash">Pago al contado</option>
                                <option value="credit">Cr√©dito hipotecario</option>
                                <option value="installments" selected>Pago en cuotas</option>
                            </select>
                        </div>
                        <button class="btn-primary" id="add-to-cart-btn" onclick="addPropertyToCart()">
                            üõí Agregar al Carrito
                        </button>
                    </div>

                    <!-- Caracter√≠sticas adicionales -->
                    <div class="additional-features">
                        <h3>Caracter√≠sticas Adicionales</h3>
                        <div class="features-grid">
                            <div class="feature-tag">‚úì Seguridad 24/7</div>
                            <div class="feature-tag">‚úì √Årea Verde</div>
                            <div class="feature-tag">‚úì Piscina</div>
                            <div class="feature-tag">‚úì Gimnasio</div>
                            <div class="feature-tag">‚úì Estacionamiento Visitas</div>
                            <div class="feature-tag">‚úì Sala de Eventos</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n de propiedades relacionadas -->
            <div class="related-properties">
                <h2>Propiedades Relacionadas</h2>
                <div class="related-grid">
                    <div class="related-property">
                        <div class="related-image">
                            <img src="img/D_NQ_NP_2X_777412-MLC87507815933_072025-F-borde-blanco.webp" alt="Casa Las Condes">
                        </div>
                        <div class="related-info">
                            <h4>Casa Borde Blanco</h4>
                            <p>üìç Zona Oriente</p>
                            <p class="related-price">$1.350.000.000</p>
                            <button class="btn-see-details" onclick="window.location.href='detalle-propiedad.html?id=prop-2'">Ver +</button>
                        </div>
                    </div>
                    <div class="related-property">
                        <div class="related-image">
                            <img src="img/D_NQ_NP_2X_821086-MLC85362248218_062025-F-alto-polkura.webp" alt="Casa Alto Polkura">
                        </div>
                        <div class="related-info">
                            <h4>Alto Polkura</h4>
                            <p>üìç Zona Sur</p>
                            <p class="related-price">$850.000.000</p>
                            <button class="btn-see-details" onclick="window.location.href='detalle-propiedad.html?id=prop-3'">Ver +</button>
                        </div>
                    </div>
                    <div class="related-property">
                        <div class="related-image">
                            <img src="img/D_NQ_NP_2X_600190-MLC90050130211_082025-F-condominio-quillayes-de-la-dehesa-ii.webp" alt="Casa La Dehesa">
                        </div>
                        <div class="related-info">
                            <h4>Condominio Mirador Piedra Roja</h4>
                            <p>üìç Zona Poniente</p>
                            <p class="related-price">$1.100.000.000</p>
                            <button class="btn-see-details" onclick="window.location.href='detalle-propiedad.html?id=prop-4'">Ver +</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <div class="logo-section">
          <h3>RENTFAGELU</h3>
          <p>Tu hogar ideal te espera</p>
        </div>
      </div>
      
      <div class="footer-columns">

        <div class="footer-column">
          <h4>Cuenta</h4>
          <ul>
            <li><a href="login.html">Iniciar sesi√≥n</a></li>
            <li><a href="registro.html">Registrarse</a></li>
            <li><a href="carrito.html">Mi carrito</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h4>Contacto</h4>
          <ul>
            <li><a href="contacto.html">Contacto</a></li>
            <li><a href="nosotros.html">Nosotros</a></li>
            <li><a href="email:contacto@rentfagelu.cl">contacto@rentfagelu.cl</a></li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Rentfagelu. Todos los derechos reservados. | Plataforma de arriendos en Santiago, Chile</p>
    </div>
  </footer>

    <script src="assets/script.js"></script>
    <script src="assets/auth.js"></script>
    <script src="assets/cart.js"></script>
    <script>
        // Datos de las propiedades (en una aplicaci√≥n real, esto vendr√≠a de una base de datos)
        const propertyData = {
            'prop-1': {
                title: 'Condominio Quillayes de Chicureo',
                location: 'Chicureo, Santiago',
                price: '$950.000.000',
                bedrooms: '3 Habitaciones',
                bathrooms: '2 Ba√±os',
                area: '120 m¬≤',
                parking: '2 Estacionamientos',
                description: 'Hermosa casa en condominio cerrado con amplios espacios verdes, seguridad 24/7 y excelente conectividad. Perfecta para familias que buscan tranquilidad sin alejarse de la ciudad. Cuenta con acabados de primera calidad, cocina equipada y acceso a √°reas comunes como piscina, quincho y juegos infantiles.',
                images: [
                    'img/D_NQ_NP_2X_914377-MLC85664600807_062025-F-condominio-quillayes-de-chicureo.webp',
                    'img/interior-descarga.jpg',
                    'img/interior-images.jpg'
                ]
            },
            'prop-2': {
                title: 'Casa Borde Blanco',
                location: 'Las Condes, Santiago',
                price: '$1.350.000.000',
                bedrooms: '4 Habitaciones',
                bathrooms: '3 Ba√±os',
                area: '180 m¬≤',
                parking: '2 Estacionamientos',
                description: 'Elegante propiedad en sector exclusivo con vista panor√°mica, jard√≠n privado y acceso a todas las comodidades urbanas. Dise√±o moderno y acabados de lujo, ideal para ejecutivos y familias que buscan el m√°ximo confort en una ubicaci√≥n privilegiada.',
                images: [
                    'img/D_NQ_NP_2X_777412-MLC87507815933_072025-F-borde-blanco.webp',
                    'img/interior-plano-vacio-elementos-decoracion_1303-23910.jpg',
                    'img/interiorb-images.jpg'
                ]
            },
            'prop-3': {
                title: 'Alto Polkura',
                location: 'Providencia, Santiago',
                price: '$850.000.000',
                bedrooms: '2 Habitaciones',
                bathrooms: '2 Ba√±os',
                area: '85 m¬≤',
                parking: '1 Estacionamiento',
                description: 'Departamento moderno en el coraz√≥n de Providencia, cerca del metro y centros comerciales. Ideal para profesionales j√≥venes o parejas. Cuenta con balc√≥n, cocina americana y excelente iluminaci√≥n natural.',
                images: [
                    'img/D_NQ_NP_2X_821086-MLC85362248218_062025-F-alto-polkura.webp',
                    'img/interiorc-descarga.jpg',
                    'img/interiorc2-descarga.jpg'
                ]
            },
            'prop-4': {
                title: 'Condominio Mirador Piedra Roja',
                location: 'Colina, Santiago',
                price: '$1.100.000.000',
                bedrooms: '3 Habitaciones',
                bathrooms: '2 Ba√±os',
                area: '140 m¬≤',
                parking: '2 Estacionamientos',
                description: 'Casa familiar en condominio con piscina, quincho y √°reas verdes. Ambiente tranquilo y seguro para toda la familia con excelente calidad de vida. Incluye acceso a club house, canchas deportivas y √°reas de recreaci√≥n.',
                images: [
                    'img/D_NQ_NP_2X_865334-MLC80840345342_122024-F-condominio-mirador-piedra-roja.webp',
                    'img/interior-images.jpg',
                    'img/interiorb-images.jpg'
                ]
            }
        };

        // Cargar informaci√≥n de la propiedad basada en URL params
        function loadPropertyDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const propertyId = urlParams.get('id');
            
            if (propertyId && propertyData[propertyId]) {
                const property = propertyData[propertyId];
                
                document.getElementById('property-title').textContent = property.title;
                document.getElementById('property-location').textContent = property.location;
                document.getElementById('property-price').textContent = property.price;
                document.getElementById('property-bedrooms').textContent = property.bedrooms;
                document.getElementById('property-bathrooms').textContent = property.bathrooms;
                document.getElementById('property-area').textContent = property.area;
                document.getElementById('property-parking').textContent = property.parking;
                document.getElementById('property-description-text').textContent = property.description;
                
                // Cargar im√°genes
                loadPropertyImages(property.images);
                
                // Actualizar t√≠tulo de la p√°gina
                document.title = `${property.title} - RentFagelu`;
            } else {
                // Si no hay ID o no existe la propiedad, mostrar informaci√≥n gen√©rica
                document.getElementById('property-title').textContent = 'Propiedad No Encontrada';
                document.getElementById('property-description-text').textContent = 'Lo sentimos, la propiedad que buscas no est√° disponible.';
            }
        }

        // Cargar im√°genes de la propiedad
        function loadPropertyImages(images) {
            const mainImg = document.getElementById('main-img');
            const thumbnails = document.querySelectorAll('.thumbnail-img');
            
            // Establecer imagen principal
            mainImg.src = images[0];
            
            // Cargar thumbnails
            thumbnails.forEach((thumbnail, index) => {
                if (images[index]) {
                    thumbnail.src = images[index];
                }
            });
        }

        // Cambiar imagen principal
        function changeMainImage(thumbnailElement, imageIndex) {
            const urlParams = new URLSearchParams(window.location.search);
            const propertyId = urlParams.get('id') || 'prop-1';
            const property = propertyData[propertyId];
            
            if (property && property.images[imageIndex]) {
                const mainImg = document.getElementById('main-img');
                mainImg.src = property.images[imageIndex];
                
                // Remover clase active de todos los thumbnails
                document.querySelectorAll('.thumbnail').forEach(thumb => {
                    thumb.classList.remove('active');
                });
                
                // Agregar clase active al thumbnail seleccionado
                thumbnailElement.classList.add('active');
            }
        }

        // Agregar propiedad al carrito
        function addPropertyToCart() {
            const urlParams = new URLSearchParams(window.location.search);
            const propertyId = urlParams.get('id') || 'prop-1';
            const selectedPayment = document.getElementById('payment-type').value;
            
            const property = {
                id: propertyId,
                title: document.getElementById('property-title').textContent,
                price: document.getElementById('property-price').textContent,
                image: '', // Se podr√≠a agregar una imagen espec√≠fica aqu√≠
                location: document.getElementById('property-location').textContent,
                paymentType: selectedPayment
            };
            
            // Usar el sistema de carrito existente
            if (typeof cart !== 'undefined' && cart.addItem) {
                cart.addItem(property);
            } else {
                // Fallback en caso de que cart.js no est√© cargado
                alert(`${property.title} agregado al carrito exitosamente!`);
                
                // Agregar al localStorage manualmente
                let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
                const existingItem = cartItems.find(item => item.id === property.id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cartItems.push({
                        ...property,
                        quantity: 1,
                        addedAt: new Date().toISOString()
                    });
                }
                
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                
                // Actualizar badge del carrito
                const cartBadge = document.querySelector('.cart-badge');
                if (cartBadge) {
                    const totalItems = cartItems.reduce((total, item) => total + item.quantity, 0);
                    cartBadge.textContent = totalItems;
                }
            }
        }

        // Cargar los detalles al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadPropertyDetails();
        });
    </script>
</body>
</html>